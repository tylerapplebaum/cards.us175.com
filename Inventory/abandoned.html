  <!-- <script src="../js/jsrsasign-latest-all-min.js"></script> -->
  <!-- <script src="../js/verifier.js"></script> -->
  <!-- <script src="js/userprofile.js"></script> --> 

 <!-- Form for adding Inventory 
  <div class="container-fluid">
  <div class="collapse" id="createFormCollapse">
  <form id="createForm" class="form-inline">
    <input type="text" id="yearInput" placeholder="Year" class="form-control mb-2 mr-sm-2 flex-grow-1" required>
    <input type="text" id="setInput" placeholder="Set" class="form-control mb-2 mr-sm-2" required>
    <input type="text" id="subsetInput" placeholder="Subset" class="form-control mb-2 mr-sm-2">
    <input type="text" id="playerInput" placeholder="Player" class="form-control mb-2 mr-sm-2">
    <input type="text" id="gradeInput" placeholder="Grade" class="form-control mb-2 mr-sm-2 flex-grow-1">
    <input type="date" id="txnDate" value="" class="form-control mb-2 mr-sm-2" required>
    <input type="number" step=".01" id="priceInput" placeholder="Price" class="form-control mb-2 mr-sm-2 flex-grow-1" required>
    <input type="text" id="itemtypeInput" placeholder="ItemType" list="ItemList" class="form-control mb-2 mr-sm-2 flex-grow-1" required>
      <datalist id="ItemList">
        <option value="Single"></option>
        <option value="Pack"></option>
        <option value="Box"></option>
        <option value="Case"></option>
      </datalist>
    <input type="text" id="txnsourceInput" placeholder="Source" list="TxnSourceList" class="form-control mb-2 mr-sm-2 flex-grow-1" required>
      <datalist id="TxnSourceList">
        <option value="eBay"></option>
        <option value="Blowout Forums"></option>
        <option value="/r/baseballcards"></option>
        <option value="Card Show"></option>
        <option value="Topps/Fanatics"></option>
        <option value="Auction House"></option>
      </datalist>
      <input type="file" class="form-control-custom mb-2 mr-sm-2" id="screenshotInput" accept=".jpg, .jpeg, .png">
    <button id="add-archived" type="submit" class="btn btn-primary mb-2 flex-grow-1">
      Add Inventory
    </button>

  </form>
  -->
  <!--
  <form id="bulkForm" class="form-inline">
    <input type="file" class="form-control-custom mb-2 mr-sm-2" id="csvInput" accept=".csv">
    <button id="bulk-add" type="submit" class="btn btn-primary mb-2">
      <span class="badge"><img src="../img/file-earmark-arrow-up.svg" alt="bulk upload"></span>
      Bulk
      <span class="sr-only">bulk upload inventory</span>
    </button>
  </form>
  </div>
  </div>
  end add inventory form -->


          <!-- <input type="date" id="startDate" class="form-control mb-2 mr-sm-2"> -->
        <!-- <input type="date" id="endDate" class="form-control mb-2 mr-sm-2"> -->
        <!-- Default checked -->
        <!--
        <div class="custom-control custom-switch" id="searchToggle">
          <input type="checkbox" class="custom-control-input" id="customSwitch1" onchange="toggleSetPlayer()" checked>
          <label class="custom-control-label" for="customSwitch1"></label>
        </div>
        -->

    /*
    function toggleSetPlayer() {
      const setSearch = 'document.getElementById("setSearchList")';
      const playerSearch = 'document.getElementById("playerSearchList")';
      const boxSearch = 'document.getElementById("boxSearchList")';
      if (!Boolean(document.getElementById("setSearchList").classList.contains('d-none'))) {
        // case: first toggle hit. Add the class d-none first
        document.getElementById("setSearchList").classList.add('d-none');
        // playerSearchList can toggle immediately because it defaults to d-none
        document.getElementById("playerSearchList").classList.toggle('d-none');
      } else {
        // case: hitting the toggle n + 1 times
        document.getElementById("playerSearchList").classList.toggle('d-none');
        document.getElementById("setSearchList").classList.toggle('d-none');
      }

    }
    */

  <script>
	let accessToken = localStorage.getItem('accessToken');
  </script>

    <!--
  <script>
    function setDates(id, value) {
      // https://stackoverflow.com/a/14649259
      var dateField = document.getElementById(id);
      dateField.setAttribute("value", value);
    }
      // https://stackoverflow.com/a/13572682
      var today = new Date(), y = today.getFullYear(), m = today.getMonth();
      var beginMonth = new Date(y, m, 1);
    window.onload = function() {
      setDates("startDate",beginMonth.toLocaleDateString('fr-CA'));
      setDates("endDate",today.toLocaleDateString('fr-CA'));
      setDates("txnDate",today.toLocaleDateString('fr-CA'));
    }
  </script>
  -->

        /*
      var data = {
        Set: set,
        Year: year,
        Subset: subset,
        BoxNum: boxnum,
        PlayerName: playername,
        Qty: qty,
        SearchType: searchtype
      };
      */
    /*
    function convertImageToBase64() {
      // https://stackoverflow.com/a/65926546
      const fileSelector = document.getElementById('screenshotInput');
      fileSelector.addEventListener('change', (event) => {
        const fileList = event.target.files[0];
        // console.log(fileList);
        // encode the file using the FileReader API
        const reader = new FileReader();
        reader.onloadend = () => {
          // use a regex to remove data url part
          const base64String = reader.result
          window.mimetype = base64String.match(/image\/\w+/)[0]
          console.log(window.mimetype)
          // console.log(base64String);
          window.b64Image = base64String
            .replace('data:', '')
            .replace(/^.+,/, '');
        };
        reader.readAsDataURL(fileList);
      });
    }
    convertImageToBase64();
    */

      <script>
    function tableToCSV() {
        // Variable to store the final csv data
        let csv_data = [];
        // Get each row data
        let rows = document.getElementsByTagName('tr');
        for (let i = 0; i < rows.length; i++) {
            // Get each column data
            let cols = rows[i].querySelectorAll('td,th');
            // Stores each csv row data
            let csvrow = [];
            for (let j = 0; j < cols.length - 1; j++) { // exclude button column
                // Get the text data of each cell of a row and push it to csvrow
                csvrow.push(cols[j].innerText);
            }
            // Combine each column value with comma
            csv_data.push(csvrow.join(","));
        }
        // Combine each row data with new line character
        csv_data = csv_data.join('\n');
        // Call this function to download csv file  
        downloadCSVFile(csv_data);
    }

    function downloadCSVFile(csv_data) {
        // Create CSV file object and feed our csv_data into it
        CSVFile = new Blob([csv_data], {
            type: "text/csv"
        });
        // Create to temporary link to initiate download process
        let temp_link = document.createElement('a');
        // Name csv file
        var elements = [];
        var setYear = document.getElementById('queryYear').value;
        if (setYear) {elements.push(setYear)};
        var setName = document.getElementById('setSearchList').value;
        if (setName) {elements.push(setName)};
        var subsetName = document.getElementById('subsetSearchList').value;
        if (subsetName) {elements.push(subsetName)};
        var setQty = document.getElementById('qty').value;
        if (setQty === '1') {
          elements.push('In-Inventory')
        } else if (setQty === '0') {
          elements.push('Missing')
        };
        var csvName = elements.join('-');
        // Download csv file
        temp_link.download = csvName + '.csv';
        let url = window.URL.createObjectURL(CSVFile);
        temp_link.href = url;
        // This link should not be displayed
        temp_link.style.display = "none";
        document.body.appendChild(temp_link);
        // Automatically click the link to trigger download
        temp_link.click();
        document.body.removeChild(temp_link);
    }
  </script>